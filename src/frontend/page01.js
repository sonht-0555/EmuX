async function showFileGroups(e){const t=[{title:"saves",files:(await listStore("saves")).filter(t=>t.startsWith(e))},{title:"states",files:(await listStore("states")).filter(t=>t.startsWith(e))},{title:"games",files:(await listStore("games")).filter(t=>t.startsWith(e))}];list01.innerHTML=t.map(e=>{if(0===e.files.length)return"";return`${e.files.map(t=>`<file data="${e.title}"><name>${t}</name><dele></dele></file>`).join("")}<titl>${e.title}.</titl>`}).join(""),list01.querySelectorAll("name").forEach(t=>{t.onclick=async()=>{const n=t.parentElement.querySelector("name").textContent;window.confirm(`Download this file?  ${n}`)&&(await downloadFromStore(n),await showFileGroups(e))}}),list01.querySelectorAll("dele").forEach(t=>{t.onclick=async()=>{const n=t.parentElement.querySelector("name").textContent;window.confirm(`Delete this file?  ${n}`)&&(await deleteFromStore(n),await showFileGroups(e))}})}async function listGame(){const e=await listStore("games");list.innerHTML=e.map(e=>`<rom><name>${e}</name><more></more></rom>`).join(""),list.querySelectorAll("name").forEach(e=>{e.onclick=()=>{loadGame(e.textContent)}}),list.querySelectorAll("more").forEach(e=>{e.onclick=()=>{showFileGroups(e.parentElement.querySelector("name").textContent.slice(0,-4)),list.hidden=!0,list01.hidden=!1}})}async function verSetting(e=[80,160,5]){page02.style.paddingTop=`${e[current]}px`,e.forEach((e,t)=>{const n=`k${e}`,i=document.getElementById(n),o=t===current?"var(--profile-1)":"var(--profile-4)";i.style.stroke=o}),local("vertical",current),current=(current+1)%e.length}function optionClick(e){const t={Cloud:()=>console.log("Cloud"),Restore:()=>console.log("Restore"),Backup:()=>console.log("Backup")};t[e]&&t[e]()}document.addEventListener("DOMContentLoaded",function(){"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(e=>{e.active&&!navigator.serviceWorker.controller&&window.location.reload()})}),navigator.serviceWorker.addEventListener("message",function(e){if("Updating..."===e.data.msg){let e=0;const t=setInterval(()=>{e++,notifi(" Up","date.","",` Please wait in...|${e}|`),10===e&&(clearInterval(t),location.reload())},1e3)}})),ver.textContent=gameVer,switch0.textContent=local("render")||"WGPU",setTimeout(()=>{listGame(),verSetting()},2e3),romInput.addEventListener("change",function(e){inputGame(e)}),vertical.addEventListener("click",function(){verSetting()}),logo.addEventListener("click",function(){list.hidden=!1,list01.hidden=!0,list02.hidden=!0,listGame()}),document.querySelectorAll("opti").forEach(function(e){e.addEventListener("click",function(){optionClick(e.textContent.trim())})})});