let brightnessValue=5,swipeStartY=0,isSwiping=!1,shaderNumber=1,activeElement=null;const activePointers=new Map;function handleButton(e,t){(t?.getAttribute("data")?.split("-").slice(1)||[]).forEach(t=>{e?buttonPress(t):buttonUnpress(t)})}function setPointerState(e,t){const n=activePointers.get(e);t!==n&&(n&&handleButton(!1,n),t?(activePointers.set(e,t),handleButton(!0,t)):activePointers.delete(e))}document.addEventListener("DOMContentLoaded",function(){document.onpointerdown=e=>{setPointerState(e.pointerId,e.target.closest("[data]"))},document.onpointermove=e=>{const t=activePointers.get(e.pointerId);if(!t)return;const n=document.elementFromPoint(e.clientX,e.clientY)?.closest("[data]");if(n&&n!==t){t.getAttribute("data").split("-")[0]===n.getAttribute("data").split("-")[0]&&setPointerState(e.pointerId,n)}},canvas.onpointerdown=e=>{const t=canvas.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;doubleTap(e,canvas,1)&&(n<t.width/2?i<t.height/2?loadState(3):loadState(2):i<t.height/2?saveState(3):saveState(2)),swipeStartY=e.clientY,isSwiping=e.clientX>t.right-40},canvas.onpointermove=e=>{if(!isSwiping)return;Math.abs(swipeStartY-e.clientY)>=20&&(brightnessValue=swipeStartY-e.clientY>0?Math.min(10,brightnessValue+1):Math.max(0,brightnessValue-1),gamepad.style.opacity=brightnessValue/10,message(`Brightness_${brightnessValue}0.nit`),swipeStartY=e.clientY)},canvasB.onpointerdown=canvasB.onpointermove=e=>{if(!Module.isNDS)return;const t=canvasB.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top,o="pointerup"!==e.type&&"pointercancel"!==e.type;window._pD=o?1:0,window._pX=Math.floor(n/t.width*65535-32768),window._pY=Math.floor(i/t.height*32767),e.preventDefault()},canvasB.onpointerup=canvasB.onpointercancel=()=>{window._pD=0,isSwiping=!1},state.onpointerdown=e=>{if(doubleTap(e,state))isRunning=!1,setTimeout(()=>{const e=prompt("Format [shaderxx-data]");e&&local(...e.split("-")),isRunning=!0},150);else{shaderNumber=shaderNumber%5+1,local("shader",shaderNumber);const e=local(`shader0${shaderNumber}`)||"0.0.0.1.0.0.1.0.0.1.0.0.1.0.0.0";screen.style.setProperty("--shader",svgGen(window.devicePixelRatio,integer,e)),message(`[0${shaderNumber}] Matrix!`)}},switch0.onpointerdown=()=>{switchRenderer()},["pointerup","pointercancel"].forEach(e=>{addEventListener(e,e=>{setPointerState(e.pointerId,null),isSwiping=!1,joy.style.opacity="0"})}),joy.onpointerdown=()=>{joy.style.opacity="1"},invis.onpointermove=()=>{page00.hidden=!1,notifi(" pa","use.",""," double tap to resume."),pauseGame()},page00.onpointerdown=e=>{doubleTap(e,page00)&&(page00.hidden=!0,resumeGame())}});